# 概念

## 简介

- Netty是一个异步. 基于事件驱动的网络应用框架, 用于快速开发高性能, 高可靠性的网络IO程序
- Netty主要针对在TCP协议下, 面向Clients端的高并发应用, 或者Peer-to-Peer场景下的大量数据持续传输的应用
- Netty本质是一个NIO框架, 适用于服务器通讯相关的多种应用场景

## 架构

分为四层

- 底层 TCP/IP
- 倒数第二层  JDK(io/网络)
- 第二层 NIO(优化了JDK)
- 最上层 Netty(基于NIO)

## IO模型

**概述:** 用什么样的通道进行数据的发送和接受, 很大程度上决定了程序通信的性能

目前有三种网络编程模型: BIO, NIO, AIO

### BIO

Java的原生IO, **同步并阻塞**, 服务器实现模式为一个连接一个线程, 即客户端有连接请求时服务器端就需要启动一个线程进行处理, 如果这个连接不做任何事情会造成不必要的线程开销, 如果客户端数量很多服务端需要启用大量的线程与之连接, 影响服务端性能

**适用场景**: BIO方式适用于连接数较小且固定的架构, 这种方式对服务器资源要求较高, 并发局限于应用中

### NIO

**同步非阻塞**, 服务器实现模式为一个线程处理多个请求(连接), 即客户端发送的连接请求都会注册到多路复用器(**Selector**)上, 服务端仅用一个线程去管理多路复用器, 多路复用器通过轮循, 确定客户端连接有I/O请求就进行处理

**适用场景:** NIO方式适用于连接数目多且连接比较短的架构, 比如聊天服务器, 弹幕系统, 服务器之间的通讯, 编程较为复杂

### AIO(不常用)

**异步非阻塞**, AIO引入异步通道的概念, 采用Proactor模式, 简化了程序的编写, 有效的请求才启动线程, 它的特点是先用操作系统完成后才通知服务端程序去启动线程去处理, 一般用于连接数较多且连接时间较长的应用

**适用场景**: AIO方式适用于连接数目多且连接比较长的架构, 比如相册服务器, 充分调用OS参与并发操作, 编程较为复杂

