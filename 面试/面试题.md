# JAVA

## JVM

- ### JVM虚拟机的组成

  - **类加载器子系统**

    类加载器子系统用于将编译好的．Class文件加载到JVM中

  - **运行时数据区**

    运行时数据区用于存储在JVM运行过程中产生的数据, 包括

    - 程序计数器
    - 方法区
    - 本地方法区
    - 虚拟机堆
    - 虚拟机栈

  - **执行引擎**

    执行引擎包括

    - 即时编译器

      即时编译器用于将Java字节码文件, 编译成具体的机器码文件

    - 垃圾回收器

      垃圾回收器用于回收在运行过程中不在使用的对象

  - **本地接口库**

    本地接口库用于调用操作系统的本地方法库完成具体的指令操作

![JVM组成](../图片/面试/JVM组成.png)

- **Java程序的运行过程**
  - Java源文件被编译为字节码文件
  - JVM将字节码文件编译成相应操作系统的机器码
  - 机器码调用相应操作系统的本地方法库执行相应的
- **JVM内存区域**
  - 线程私有区域
    - 程序计数器
    - 虚拟机栈
    - 本地方法区
  - 线程共享区域
    - 方法区
    - 堆
  - 直接内存

## 基础

### **String, StringBuffer, StringBuilder**

- **可变性**

  String, StringBuffer, StringBuilder的值都存在Char数组中

  其中String被final修饰, 为常量不可编辑

- **线程安全**

  String为常量是线程安全的

  StringBuffer内部的方法加了synchronized同步锁, 是线程安全的

  StringBuilder非线程安全

- **性能**

  String为常量, 每次修改值, 都要重新更改引用, 性能最低

  StringBuffer加了同步锁, 性能其次

  StringBuilder性能最高

```java
String a = "a";
String b = "b";
String c = a + b  
// 底层 new StringBuilder().append(a).appned(b).toString();
```

### 装箱和拆箱

- **手动装箱和拆箱**

  包装类都被final修饰,  不可修改

  **装箱**   Integer a = new Integer(100);

  **拆箱**   a.intValue(); 

- **自动装箱和拆箱**

  **装箱**   Integer a = 100;  底层调用 Integer.valueOf();

  **拆箱**   int b = c;   底层调用 intValue();

- **缓存池**

  数字在 -128 < x < 127 之间会从缓存中取值

  ```java
  Integer a = 10;
  Integer b = 10;
  a == b  // true
  ```

  ```java
  Integer a = 250;
  Integer b = 250;
  a == b  // false
  ```

  数字包装类在比较时, 有运算符的情况下, 比的是值

  ```java
  Integer a = 128;
  Integer b = 128;
  Integer c = 127;
  a == b // false
  a == c + 1 // true
  ```

  字符在  0 < x < 127 之间会从缓存中取值

  