# 目录

## 查看

**ls**

- -a  显示所有文件, 包含隐藏文件

- -l  显示详细信息(可简化使用 ll)

  -l 展示的详细内容分别为

  - 权限

    十位字符串  r:读  w:写  x:执行  -:没有该权限

    - 第一位

      - \-   表示是二进制文件
      - d  表示是文件夹
      - l   表示软连接

    - 第二位~第四位,  第五位~到第七位,  第八位~第十位

      分别表示所有者的权限, 所属组的权限, 其他人的权限

      - 第二, 五, 八位表示读
      - 第三, 六, 九位表示写
      - 第四, 七, 十位表示执行
      - 没有权限使用 -

  - 引用计数

  - 文件所有者

  - 文件所属组

  - 文件大小

    -  -h 和 -l 搭配使用,  可将详细信息中, 数据大小动态转换相应的单位

  - 修改日期

  - 文件名

- -d  查看当前目录属性

- -i   查看文件的i节点[id]

```
ls [选项] [操作的对象]
```

## 创建

**mkdir**

可同时创建多个目录

- -p 递归创建

```
mkdir [选项] [创建的目录名] [创建的目录名]
```

## 切换

**cd**

-  ./    表示当前目录
-  ../   表示上级目录

```
cd [路径]
```

## 查看路径

**pwd**

显示当前文件夹的绝对路径

```
pwd
```

## 删除

**rm**

- -r  删除目录
- -f  强制删除   

```
rm [选项] [要删除的对象] 
```

**rmdir**(不常用)

删除非空目录

```
rmdir [目录名]
```

## 复制

**cp**

复制文件或目录, 可同时复制多个文件

- -r  复制目录
- -p  保留文件属性

```
cp [原目录] [目标目录]
```

复制时更换名字

```
cp [原目录] [目标目录/更换的名字]
```

## 移动

**mv**

移动文件或目录, 可同时移动多个文件

```
mv [原目录] [目标目录]
```

移动时更换名字

```
mv [原目录] [目标目录/更换的名字]
```

# 文件

## 创建

**touch**

可同时创建多个文件

```
touch [文件名]
```

## 查看

**cat**

正向查看

- -n  查看行号

```
cat [文件名]
```

**tac**

反向查看

```
tac [文件名]
```

**more**

分页查看,  只能向下分页

```
more [文件名]
```

子命令

- (空格) 或 f     翻页
- enter    换行
- q 或 Q 退出

**less**

分页查看,  可上可下分页

```
less [文件名]
```

子命令

- (空格) 或 f     翻页
- b    上一页
- g    回到首页
- :数字   要跳跃的行数
- /文字   查找
  -  n  查找下一个匹配项
- ↑ ↓   上下换行
- q   退出  

**head**

查看文件前几行,  默认前十行

- -n  数字    查看前几行

```
head -n 7 [文件名]
```

**tail**

查看文件末尾几行

- -n  数字  查看末尾几行
- -f             动态显示末尾内容

```
tail -1000f  [文件名] 
```

## 删除

**rm**

- -f  强制删除   

```
rm [选项] [要删除的对象] 
```

## 软连接

**ln**

创建硬连接, 硬连接会将源文件复制一个一个新文件,  新文件会与源文件保持同步, 既源文件修改, 硬连接的文件也会修改

软连接文件, 类似快捷方式

- -s  创建软连接

```
ln -s  [源文件] [软连接文件]
```

## 搜索

**find**

搜索文件, 需要指定搜索范围, 和匹配条件, 搜索范围就是指在哪个目录下搜索, 若在根目录下,  为 "/" 

匹配条件

- -name 

  - filename  按名称匹配, 精准匹配, 非模糊匹配 
  - \*filename\*  模糊匹配  *匹配任意个, 在两边加上通配符 * 
  - ?filename? 模糊匹配  ?匹配0或1个

- -iname 忽略大小写匹配

- -size  根据大小来查找,  n指数据块,   1数据块=512字节=0.5k

  - +n  大于
  - -n   小于
  - n   等于

- -user  userame 根据所有者查找

- -group  groupname  根据所属组查找

- -amin  -minute    根据访问时间查找

- -cmin  -minute    根据文件属性被修改的时间查找

- -mmin -minute    根据文件内容被修改的时间查找

- -a  两个条件同时满足

  ```
  # 例
  find -size +163840 -a -size -204800
  ```

- -o  两个条件满足一个

- -type  根据文件类型查找

  - f  文件
  - d  目录
  - l  软连接

- -exce  [命令]  {}  \;   对查找出的结果集, 做某些操作

- -ok[命令]  {}  \;   对查找出的结果集, 做某些操作, 会对每个文件, 做询问是否执行操作

- -inum  i节点   根据i节点查找

```
find [搜索范围] [匹配条件] [匹配内容]
```

**locate**

在文件库搜索文件, 速度快, 不会查找临时文件夹下的文件

- -i   不区分大小写

```
locate [参数] filename
```

新创建的文件, 没有被收录的文件库中,会找不到, 要使用命令更新文件库

**updatedb**

更新文件库

```
updatedb
```

**which**

搜索命令所在目录,  查找命令的别名

```
which  [命令名]
```

**whereis**

搜索命令所在的路径, 和帮助文档所在的位置

```
whereis [命令名]
```

**grep**

搜索文件内容,  将查找的内容所在的行, 显示出来

- -i   不区分大小写
- -v  忽略匹配的内容

```
grep [字符串] [文件名]
```

# vim

## 插入

- i  插入模式, 在光标所在字符前插入
- I  插入模式, 在光标所在行行首插入
- a 插入模式, 在光标所在字符后插入
- A 插入模式, 在光标所在行行尾插入
- o 插入模式, 在光标下插入新行
- O 插入模式, 在光标上插入新行
- esc  退出插入模式
- :set nu  显示行号
- :set nonu 取消行号

## 跳转

- gg 到第一行
- G  到最后一行
- :[数字]   到指定行
- $  移动到行尾
- 0  移动到行首

## 删除

- x  删除光标处字符
- nx   删除光标处后n个字符
- dd   删除光标所在行
- ndd  删除光标所在处n行
- dG  删除光标所在行到文件末尾的内容
-  D    删除光标所在处到行尾内容
- :n1, n2d   删除指定范围的行

## 复制, 剪切

- yy  复制当前行
- nyy  复制当前n行
- dd   剪切光标所在行
- ndd  剪切光标所在处n行
- p   粘贴当前行下
- P  粘贴到当前行上

## 替换

- r  在光标处替换单个字符
- R   在光标处开始替换字符

## 撤销

- u  撤销

## 搜索

- /string   搜索指定字符串
  - n   搜索出的字符串的下一个位置
  - :set ic  忽略大小写
- :%s/old/new/g   全文替换指定字符串
- :n1,n2s/old/new/g  在n1-n2的范围替换指定字符串

## 保存

- w   保存
- :w   /路径/文件名    另存为
- :wq  保存并退出
- ZZ    保存并退出
- q!   不保存退出
- :wq!  保存修改并退出

## 导入

- :r   /文件位置     
  -  !命令    可将命令的执行结果导入

## 自定义快捷键

- :map  ctrl+v [定义的快捷键]  [快捷键的操作]

```
# 创建快捷键H  插入邮箱
:map  ctrl+V+H  i邮箱<ESC>
```



# 权限

权限分为读, 写, 可执行, 文件与目录对与权限的含义分为

文件

- r   可执行cat/more/tail/head/less等查看文件的操作
- w  可用vi/vim等文件编辑器修改文件
- x   可运行脚本文件

目录

- r   可执行ls/ll等查看目录的操作
- w  可执行touch/mkdir/rmdir/rm等创建删除目录,文件的操作
- x   可执行cd进入目录

## 修改

**chmod**

- -R  递归修改,  文件夹下的所有文件都修改

- 数字方式

  rwx

  -  r  => 4
  - w => 2
  - x => 1

```
chmod [数字] 文件名
# 例: 给文件赋予 rwxr----x权限
chmod 741 文件
```

- 字母方式(不常用)

  ugoa

  - u  所有者
  - g  所属组
  - o  other
  - a  all

  +-=

  - \+  增加权限
  - \-   减少权限
  - =  赋予权限

  rwx

  - r  读
  - w  写
  - x   可执行

```
chmod [ufoa] [+-=] [rwx] [文件名]
```

## 修改所有者

**chown**

将文件的所有者, 修改为指定的用户, 仅root用户可用

```
chown [修改后的所有者] [文件名]
```

## 修改所属组

**chgrp**

```
chgrp [组名] [用户名]
```

## 默认权限配置

**umask**

- -S  查看文件/目录默认权限

  值有四个, 默认为0022, 后三位与777也就是rwx做与运算

  ```
  # 例
   777 rwx rwx rwx
   022 --- -w- -w-
  ------------------
   755 rwx r-x r-x
  ```

```
umask [修改的值]
```

# 系统

## 控制台

终止命令

```
ctrl + C
```

清空控制台

**clear**

```
ctrl + l  或 clear
```

## 网络

重启网络服务

```
service network restart
```

**ifconfig**

查询网卡信息

```
ifconfig
```

修改ip地址

```
# 临时修改, 重启丢失
ifconfig [网卡名] [ip地址]
```

**ping**

测试网络连接

```
ping  [ip]
```

**netstat**

查询网络信息

- -t   TCP协议
- -u   UDP协议
- -l    监听
- -r   路由
- -n   显示ip地址和端口号

```
netstat -tlun  # 查看本机监听的端口
netstat -an   # 查看本机所有网络连接
netstat -rn   # 查看本机路由表
```

**traceroute**

查看数据包经过的每个路由节点

```
traceroute  [域名]
```

**white**

登录的用户之间, 互相发消息

```
white [用户名]  # 回车
[消息]   # 要发送的内容
ctrl + d  # 保存并发送 
```

**wall**

给所有登录的用户发消息

```
wall [消息]
```

**mail**

给不在线的用户发送邮件

```
mail [用户名]  # 发送
mail   # 接受邮件
```

## 开关机

**shutdown**(常用)

- -h   关机
  - now   现在关机
  - hh:ss   指定时间关机
- -r   重启
- -c   取消前一个关机命令

**poweroff**

关机

```
poweroff
```

**last**

查看系统开关机, 用户登录信息

```
last
```

**lastlog**

查看所有用户的登录信息

```
lastlog
```

- -u 

  查询指定用户的登录信息

  ```
  lastlog -u [uid]  # uid 为用户在系统中的id
  ```

**init**

系统运行级别

- 0   关机
- 1  单用户 (类似window安全模式, 启用最小服务)
- 2  不完全多用户,  不含NFS服务, 不能使用网络服务
- 3   完全多用户
- 4  未分配
- 5  图形界面
- 6  重启

```
init [数字]
```

**runlevel**

查询系统运行级别

```
runlevel
```

**logout**

退出登录

```
logout
```

## 用户

**useradd**

创建用户

**passwd**

设置密码/修改密码

```
# 先创建用户, 再给用户设置密码
useradd [username]
passwd [username]
```

**who**

查看当前登录的用户

```
who
```

**w**

查看当前登录的用户和系统运行的信息(运行时间, 登录用户数量, 系统负载等)

```
w
```

## 所属组

**groupadd**

创建所属组

```
groupadd [组名]
```

## 登出

```
logout
```

## 访问

```
ssh [ip]
```

## 帮助

**man**  / **info**

查看命令帮助信息, 查看配置文件帮助信息

```
# 查看文件的帮助信息时, 不需要加文件的绝对路径
# 当命令与配置文件重名时,  可指定类型, 来确定要查看的帮助信息
# 类型  1 表示命令   5 表示配置文件
man [类型] [命令/文件名]
```

**whatis**

简略的查看命令的帮助信息

```
whatis [命令]
```

**apropos**

简略的查看配置文件的帮助信息

```
apropos [文件名]
```

**--help**

作为每个命令的选项,  显示该命令的所有选项

```
[命令] --help
```

**help**

查看内置命令的帮助   ps: 内置命令为找不到命令位置的命令, 无法用man查看

```
help [内置命令]
```

## 时间

**date**

查看日期

```
date
```

修改日期

格式为 MMDDhhmmCCYY.ss

```
# 将日期修改为 2020年10月1日 15:35:19
date 100115352020.19
```

**uptime**

查看系统运行的时间

```
uptime
```

## 压缩解压

- .gz

  - gzip  压缩,  不保留源文件,  不能压缩文件夹

    ```
    gzip [文件名]
    ```

  - gunzip / gzip -d  解压缩

    ```
    gunzip [文件名]
    ```

- .tar.gz

  - tar  压缩目录  

    - -z  打包同时压缩  /  解包同时解压缩
    - -c 打包
    - -x 解包
    - -v 显示详细信息
    - -f  指定文件名

    ```
    # 压缩
    tar -zcvf [压缩后的文件名] [目录] 
    # 解压
    tar -zxvf [要解压的文件名]
    ```

- .zip(压缩效果差)

  - zip 压缩

    - -r  压缩目录

    ```
    zip [文件名]
    zip -r [目录名]
    ```

  - unzip 解压

    ```
    unzip [文件名]
    ```

- .bz2(zip升级版)

  - bzip2  压缩文件

    - -k  压缩时保留原文件

    ```
    bzip2 -k [文件名]
    ```

  - bunzip2  解压

    - -k  解压时保留原文件

    ```
    bunzip2 -k [文件名]
    ```

  - tar  与tar 配置打包压缩,  可压缩目录为.bz2格式

    ```
    # 压缩
    tar -cjvf [压缩后的名.tar.bz2] [目录]
    # 解压
    tar -xjvf [文件名]
    ```

## 防火墙

firewall-cmd

开放端口

```
firewall-cmd --zone=public --add-port=[端口号]/tcp --permanent
```

查看开放端口列表

```
firewall-cmd --list-port
```

重启防火墙

```
firewall-cmd --reload
```

检查端口是否放开

```
firewall-cmd --zone=public --query-port=[端口号]/tcp
```



# 软件安装

## 源码包

带源代码的包,  安装慢

源码包性能更强

- 脚本安装包(.sh,  带界面的安装包)

## 二进制包(RPM包,  系统默认包)

不带源代码,  安装快